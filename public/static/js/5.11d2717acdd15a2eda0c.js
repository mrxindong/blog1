webpackJsonp([5],{PMIa:function(t,e){},bc3b:function(t,e,n){"use strict";var a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"bigdiv",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("div",{staticClass:"blogdetail"},[n("div",{staticClass:"blogdetail_header"},[n("span",[t._v(t._s(t.blogname)),n("i",{staticClass:"el-icon-caret-right"})]),t._v(" "),n("span",[n("router-link",{staticStyle:{color:"orange"},attrs:{to:{name:"Index"}}},[t._v("首页")]),n("i",{staticClass:"el-icon-caret-right"})],1),t._v(" "),n("span",[t._v(t._s(t.title))])]),t._v(" "),n("div",{staticClass:"blogdetail_content"},[n("h1",[t._v(t._s(t.title))]),t._v(" "),n("p",[n("span",[t._v("作者: "+t._s(t.author))]),n("span",[t._v("分类:  "),n("router-link",{attrs:{to:{name:"blogcategories",query:{id:t.tagid}}}},[t._v(t._s(t.blogtype))])],1),n("span",[n("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t.createtime))]),t._v(" "),n("span",[n("i",{staticClass:"el-icon-message"}),t._v("  "+t._s(t.commentcount)+" \n             "),n("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(t.viewcount)+"\n        ")])]),t._v(" "),n("div",{staticClass:"blogcontent",domProps:{innerHTML:t._s(t.content)}})]),t._v(" "),n("div",{staticClass:"copyright"},[n("ul",[n("li",[t._v("作者:\n              "),n("a",{attrs:{href:"#"}},[t._v(t._s(t.author))])]),t._v(" "),n("li",[t._v("发表日期: "+t._s(t.createtime))]),t._v(" "),n("li",[t._v("文章分类:\n              "),n("router-link",{attrs:{to:{name:"blogcategories",query:{id:t.tagid}}}},[t._v(t._s(t.blogtype))])],1),t._v(" "),n("li",[t._v("版权声明: "+t._s(t.author)+"个人博客，引用请注明出处，盗版必究")]),t._v(" "),n("li",[t._v("联系我:"+t._s(t.email)+"\n          ")])])]),t._v(" "),n("div",{staticClass:"ctocomment"},[n("p",[t._v("给"+t._s(t.author)+"留言")]),t._v(" "),n("ul",[n("li",{staticClass:"ctocomment_username"},[n("span",[t._v("昵称：")]),t._v(" "),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],attrs:{type:"text",value:"",placeholder:"您的昵称"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})])]),t._v(" "),n("li",{staticClass:"comment_content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{placeholder:"您的留言"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._v(" "),n("li",[n("input",{attrs:{type:"button",value:"提交"},on:{click:t.savecomment}})]),t._v(" "),n("li",[t.errshow?n("el-alert",{attrs:{title:t.errtitle,type:"error","show-icon":""}}):t._e()],1)])]),t._v(" "),n("div",{staticClass:"ccommentlist"},[n("p",[t._v("留言("+t._s(t.commentcount)+"条)")]),t._v(" "),t.commentlist.length>0?n("ul",t._l(t.commentlist,function(e,a){return n("div",{key:a},[n("li",{staticClass:"comment_title"},[n("span",[t._v(t._s(e.time))]),t._v(" "),n("span",[t._v(t._s(e.name))])]),t._v(" "),n("li",{staticClass:"comment_content"},[n("div",[t._v(t._s(e.content))])])])})):t._e()]),t._v(" "),n("footerVue",{staticStyle:{color:"#000"},attrs:{text:t.footer}})],1)])},staticRenderFns:[]};e.a=a},kNOe:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("mr9m"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var s=n("bc3b");var c=function(t){n("PMIa")},l=n("VU/8")(o.a,s.a,!1,c,null,null);e.default=l.exports},mr9m:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o=n("BO1k"),i=(a=o)&&a.__esModule?a:{default:a},s=n("FW2P");e.default={data:function(){return{blogname:"",email:"",author:"",logo:"",footer:"",title:"",blogtype:"",createtime:"",content:"",tagid:"",viewcount:0,commentcount:0,nickname:"",comment:"",errshow:!1,errtitle:"",commentlist:[],loading:!0}},created:function(){var t=this,e=document.domain;this.$axios.get("/basic/domaininfo?domain="+e).then(function(e){if(200==e.data.code){var n=e.data.result[0];t.blogname=n.blogname,t.email=n.email,t.author=n.author,t.footer=n.footer}});var n=this.$route.params.id;this.$axios.post("/article/updateblogview","id="+n).then(function(t){200!=t.data.code&&console.log(t.data.message)}).catch(function(t){console.log(t)}),this.$axios.get("/article/getblogdetail?id="+n).then(function(e){if(200==e.data.code){var n=e.data.result[0];t.title=n.title.length>30?n.title.substr(0,30)+"……":n.title,t.content=n.content,t.createtime=(0,s.formatDate)(new Date(n.createtime),"yyyy-MM-dd HH:mm:ss"),t.blogtype=n.tagname,t.tagid=n.tagid,t.viewcount=n.viewcount}else 304==e.data.code&&t.$router.push({name:"NotFound"})}).catch(function(t){console.log(t)}),this.$axios.get("/comment/count?articleid="+n).then(function(e){200==e.data.code?t.commentcount=e.data.result[0].count:console.log(e.data.message)}).catch(function(t){console.log(t)}),this.$axios.get("/comment/list?articleid="+n).then(function(e){if(200==e.data.code){t.commentlist=[];var n=!0,a=!1,o=void 0;try{for(var c,l=(0,i.default)(e.data.result);!(n=(c=l.next()).done);n=!0){var r=c.value,m=r.name,d=(0,s.formatDate)(new Date(r.time),"yyyy-MM-dd HH:mm:ss"),u=r.content;t.commentlist.push({id:r.id,name:m,time:d,content:u})}}catch(t){a=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}}else console.log(e.data.message)}).catch(function(t){console.log(t)})},methods:{savecomment:function(){var t=this,e=this.$route.params.id,n=this.nickname;if(""==n)n="匿名用户";else if(n.length>15)return this.errtitle="昵称最长为15个字符",void(this.errshow=!0);if(""==this.comment)return this.errtitle="留言为空，无法提交",void(this.errshow=!0);this.$axios.post("/comment/add","name="+n+"&content="+this.comment+"&articleid="+e).then(function(e){200==e.data.code?(t.$message({showClose:!0,message:"留言提交成功！",type:"success"}),t.commentcount+=1,t.commentlist.unshift({name:n,content:t.comment,time:(0,s.formatDate)(new Date,"yyyy-MM-dd HH:mm:ss")})):(t.$message.error("留言提交失败"),console.log(e.data.message))}).catch(function(e){t.$message.error("留言提交失败"),console.log(e)})}},watch:{comment:function(t,e){""!=this.comment&&"留言为空，无法提交"==this.errtitle&&this.errshow&&(this.errshow=!1)},nickname:function(t,e){""!=this.nickname&&(this.nickname.length>15?(this.errtitle="昵称最长为15个字符",this.errshow=!0):"昵称最长为15个字符"==this.errtitle&&this.errshow&&(this.errshow=!1))},content:function(){this.loading=!1}}}}});
//# sourceMappingURL=5.11d2717acdd15a2eda0c.js.map